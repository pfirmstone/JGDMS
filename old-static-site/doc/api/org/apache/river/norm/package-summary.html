<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Mon Mar 28 17:57:44 AEST 2016 -->
<title>org.apache.river.norm (River-Internet vtrunk API Documentation)</title>
<meta name="date" content="2016-03-28">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.apache.river.norm (River-Internet vtrunk API Documentation)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/river/mercury/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../org/apache/river/outrigger/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/river/norm/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.apache.river.norm</h1>
<div class="docSummary">
<div class="block">Provides implementations of <a href="../../../../net/jini/lease/LeaseRenewalService.html" title="interface in net.jini.lease"><code>LeaseRenewalService</code></a>.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/river/norm/NormPermission.html" title="class in org.apache.river.norm">NormPermission</a></td>
<td class="colLast">
<div class="block">Represents permissions that can be used to express the access control policy
 for the a Norm server exported with a <a href="../../../../net/jini/jeri/BasicJeriExporter.html" title="class in net.jini.jeri"><code>BasicJeriExporter</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/river/norm/InternalNormException.html" title="class in org.apache.river.norm">InternalNormException</a></td>
<td class="colLast">
<div class="block">This exception denotes a problem with the local implementation of a
 Norm server.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.apache.river.norm Description">Package org.apache.river.norm Description</h2>
<div class="block">Provides implementations of <a href="../../../../net/jini/lease/LeaseRenewalService.html" title="interface in net.jini.lease"><code>LeaseRenewalService</code></a>.
Three implementations are available for use with the <a href="../../../../org/apache/river/start/package-summary.html"><code>org.apache.river.start</code></a> package:

<ul>

<li> <code>org.apache.river.norm.ActivatableNormServerImpl</code> - an
     activatable, persistent implementation, suitable for use with
     <a href="../../../../org/apache/river/start/SharedActivatableServiceDescriptor.html" title="class in org.apache.river.start"><code>SharedActivatableServiceDescriptor</code></a>

<li> <code>org.apache.river.norm.PersistentNormServerImpl</code> - a
     non-activatable, persistent implementation, suitable for use with
     <a href="../../../../org/apache/river/start/NonActivatableServiceDescriptor.html" title="class in org.apache.river.start"><code>NonActivatableServiceDescriptor</code></a>

<li> <code>org.apache.river.norm.TransientNormServerImpl</code> - a
     transient implementation, also suitable for use with
     <code>NonActivatableServiceDescriptor</code>

</ul> <p>

The JAR file <code>norm.jar</code>, included in the <code>lib</code>
subdirectory of the River-Internet release installation,
contains the classes for the three Norm service implementations. The
<code>norm-dl.jar</code> and <code>jsk-dl.jar</code> files in the
<code>lib-dl</code> subdirectory contain the classes needed in the codebase for
its downloaded proxies. None of these JAR files include classes from
<code>jsk-platform.jar</code>, which are included by the service starter's
<code>start.jar</code> JAR file, and need to be included in the codebase of
clients. <p>

The object returned by the <a href="../../../../net/jini/admin/Administrable.html#getAdmin--"><code>Administrable.getAdmin</code></a> method on a Norm service proxy implements <a href="../../../../net/jini/admin/JoinAdmin.html" title="interface in net.jini.admin"><code>JoinAdmin</code></a> and <a href="../../../../org/apache/river/admin/DestroyAdmin.html" title="interface in org.apache.river.admin"><code>DestroyAdmin</code></a>. <p>

This document provides the following information about Norm: <ul>

<li> <a href="#configuration">Configuring Norm</a>
<li> <a href="#access_control">Access Control Permission Targets</a>
<li> <a href="#logging">Logging</a>
<li> <a href="#examples">Examples for Running Norm</a>

</ul> <p>

<a name="configuration">
<h2>Configuring Norm</h2>
</a>

The Norm service implementation obtains its configuration by calling
<a href="../../../../net/jini/config/ConfigurationProvider.html#getInstance-java.lang.String:A-java.lang.ClassLoader-"><code>ConfigurationProvider.getInstance</code></a> with the specified
<i>configOptions</i> and the class loader for the implementation
class. <p>

The implementation supports the following configuration entries, with
component <code>org.apache.river.norm</code>: <p>

  <table summary="Describes the activationIdPreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      activationIdPreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The proxy preparer for the service's activation
      ID. The value should not be <code>null</code>. This entry is
      obtained at service start and restart. This entry is only used by
      the activatable implementation. <p>

      Clients call the <a href="http://docs.oracle.com/javase/8/docs/api/java/rmi/activation/ActivationID.html?is-external=true#activate-boolean-" title="class or interface in java.rmi.activation"><code>activate</code></a> method on instances of <a href="http://docs.oracle.com/javase/8/docs/api/java/rmi/activation/ActivationID.html?is-external=true" title="class or interface in java.rmi.activation"><code>ActivationID</code></a> when they need to reactivate the
      service.
  </table>

  <table summary="Describes the activationSystemPreparer configuration
         entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      activationSystemPreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The proxy preparer for the proxy for the
      activation system. The value should not be <code>null</code>. This
      entry is obtained at service start and restart. This entry is only
      used by the activatable implementation. <p>

      The service calls the <a href="http://docs.oracle.com/javase/8/docs/api/java/rmi/activation/ActivationSystem.html?is-external=true#unregisterObject-java.rmi.activation.ActivationID-" title="class or interface in java.rmi.activation"><code>unregisterObject</code></a> method on the <a href="http://docs.oracle.com/javase/8/docs/api/java/rmi/activation/ActivationSystem.html?is-external=true" title="class or interface in java.rmi.activation"><code>ActivationSystem</code></a> when the service is
      destroyed.
  </table>

  <a name="discoveryManager"></a>
  <table summary="Describes the discoveryManager configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      discoveryManager</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/discovery/DiscoveryManagement.html" title="interface in net.jini.discovery"><code>DiscoveryManagement</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td>
<pre>
new <a href="../../../../net/jini/discovery/LookupDiscoveryManager.html" title="class in net.jini.discovery"><code>LookupDiscoveryManager</code></a>(
    <a href="../../../../net/jini/discovery/DiscoveryGroupManagement.html#NO_GROUPS"><code>DiscoveryGroupManagement.NO_GROUPS</code></a>,
    null,  // locators
    null,  // listener
    this)  // config
</pre>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Supplies an object used to discover the lookup
      services with which this service should register. The value should
      not be <code>null</code>. The object returned must also implement
      <a href="../../../../net/jini/discovery/DiscoveryGroupManagement.html" title="interface in net.jini.discovery"><code>DiscoveryGroupManagement</code></a> and <a href="../../../../net/jini/discovery/DiscoveryLocatorManagement.html" title="interface in net.jini.discovery"><code>DiscoveryLocatorManagement</code></a>, and should be
      configured initially to discover no groups or specific lookup
      services. This entry is obtained at service start and restart.
  </table>

  <table summary="Describes the initialLookupAttributes configuration
         entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      initialLookupAttributes</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code><a href="../../../../net/jini/core/entry/Entry.html" title="interface in net.jini.core.entry"><code>Entry</code></a>[]</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>null</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Entries to include in the set of attributes the
      service supplies when registering with lookup services, in
      addition to <a href="../../../../net/jini/lookup/entry/ServiceInfo.html" title="class in net.jini.lookup.entry"><code>ServiceInfo</code></a> and <a href="../../../../org/apache/river/lookup/entry/BasicServiceType.html" title="class in org.apache.river.lookup.entry"><code>BasicServiceType</code></a> instances provided by
      the service. An empty array or <code>null</code> specifies that
      only the service-provided attributes should be added. The array
      must not contain <code>null</code> elements. This entry is
      obtained and used when the service is first started. Following
      initial startup, the set of attributes is controlled though the
      service's <a href="../../../../net/jini/admin/JoinAdmin.html" title="interface in net.jini.admin"><code>JoinAdmin</code></a> administrable
      interface.
  </table>

  <table summary="Describes the initialLookupGroups configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      initialLookupGroups</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code>String[]</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>new String[] { "" } /* public group */</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The names of the lookup groups that the service
      should discover and join. An empty array specifies that no groups
      should be joined. A <code>null</code> value specifies that all
      groups should be joined. Otherwise, the value specifies the names
      of the groups to join. The array must not contain
      <code>null</code> elements. This entry is obtained and used when
      the service is first started. Following initial startup, the set
      of lookup groups is controlled through the service's <a href="../../../../net/jini/admin/JoinAdmin.html" title="interface in net.jini.admin"><code>JoinAdmin</code></a> administrable interface.
  </table>

  <table summary="Describes the initialLookupLocators configuration
         entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      initialLookupLocators</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code><a href="../../../../net/jini/core/discovery/LookupLocator.html" title="class in net.jini.core.discovery"><code>LookupLocator</code></a>[]</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>null /* no locators */</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The locations of specific lookup services that
      the service should discover and join. An empty array or
      <code>null</code> specifies that no specific lookup services
      should be joined. The array must not contain <code>null</code>
      elements. This entry is obtained and used when the service is
      first started. Following initial startup, the set of specific
      lookup services is controlled through the service's <a href="../../../../net/jini/admin/JoinAdmin.html" title="interface in net.jini.admin"><code>JoinAdmin</code></a> administrable interface. <p>

      The <code>LookupLocator</code> instances specified in this entry
      will not be prepared by the proxy preparer specified in the
      <code>locatorPreparer</code> entry, and will only be prepared by
      the preparer in the <code>recoveredLocatorPreparer</code> entry
      when they are being recovered.
  </table>

  <table summary="Describes the isolateSets configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      isolateSets</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code>boolean</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>false</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Whether to isolate leases in their own renewal
      sets rather than batching leases in different sets. This entry is
      obtained at service start and restart. <p>

      Setting this entry to <code>false</code> (the default) makes it
      more likely that the service can achieve better performance by
      batching leases, because it permits leases in different lease sets
      to be batched together. Note that batching leases across sets
      introduces the risk that mutually mistrustful leases in different
      sets will "capture" each other when they are batched, allowing an
      untrustworthy lease to gain access to leases in other sets.
  </table>

  <a name="leaseManager"></a>
  <table summary="Describes the leaseManager configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      leaseManager</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/lease/LeaseRenewalManager.html" title="class in net.jini.lease"><code>LeaseRenewalManager</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>new LeaseRenewalManager(this /* config */)</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Supplies the lease renewal manager that Norm
      both uses to renew client leases and passes to the constructor
      when creating its <a href="../../../../net/jini/lookup/JoinManager.html" title="class in net.jini.lookup"><code>JoinManager</code></a>. The value
      should not be <code>null</code>. This entry is obtained at service
      start and restart.
  </table>

  <table summary="Describes the leasePolicy configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      leasePolicy</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../org/apache/river/landlord/LeasePeriodPolicy.html" title="interface in org.apache.river.landlord"><code>LeasePeriodPolicy</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td>
<pre>
new <a href="../../../../org/apache/river/landlord/FixedLeasePeriodPolicy.html" title="class in org.apache.river.landlord"><code>FixedLeasePeriodPolicy</code></a>(
    2 * 60 * 60 * 1000L,  // max = 2 hours
    60 * 60 * 1000L)      // default = 1 hour
</pre>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The policy for calculating lease grants and
      renewals. The value should not be <code>null</code>. The default
      grants leases with a maximum duration of 2 hours and a default
      duration of 1 hour. This entry is obtained at service start and
      restart.
  </table>

  <table summary="Describes the leasePreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      leasePreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Prepares client leases for use when they are
      supplied in calls to <a href="../../../../net/jini/lease/LeaseRenewalSet.html#renewFor-net.jini.core.lease.Lease-long-long-"><code>LeaseRenewalSet.renewFor</code></a>
      or <a href="../../../../net/jini/lease/LeaseRenewalSet.html#remove-net.jini.core.lease.Lease-"><code>LeaseRenewalSet.remove</code></a>. The value should not be
      <code>null</code>. The preparer must return a lease which is equal
      to the original lease as determined by <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang"><code>Object.equals</code></a>. This entry is obtained at
      service start and restart. <p>

      This preparer needs to perform all operations needed to use a
      newly received lease, typically including verifying trust in the
      lease proxy, granting permissions, and setting constraints. The
      prepared lease will be retained by the service in its persistent
      store. <p>

      The service calls the <a href="../../../../net/jini/core/lease/Lease.html#renew-long-"><code>renew</code></a> method on <a href="../../../../net/jini/core/lease/Lease.html" title="interface in net.jini.core.lease"><code>Lease</code></a> instances, and
      the <a href="../../../../net/jini/core/lease/LeaseMap.html#renewAll--"><code>renewAll</code></a> method
      on lease maps it creates (via the <a href="../../../../net/jini/lease/LeaseRenewalManager.html" title="class in net.jini.lease"><code>LeaseRenewalManager</code></a>) from the leases.
  </table>

  <table summary="Describes the listenerPreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      listenerPreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Prepares expiration warning and renewal failure
      listeners for use when they are supplied in calls to <a href="../../../../net/jini/lease/LeaseRenewalSet.html#setExpirationWarningListener-net.jini.core.event.RemoteEventListener-long-java.rmi.MarshalledObject-"><code>LeaseRenewalSet.setExpirationWarningListener</code></a> and <a href="../../../../net/jini/lease/LeaseRenewalSet.html#setRenewalFailureListener-net.jini.core.event.RemoteEventListener-java.rmi.MarshalledObject-"><code>LeaseRenewalSet.setRenewalFailureListener</code></a>. The value should not
      be <code>null</code>. The preparer must return a listener which is
      equal to the original listener as determined by <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang"><code>Object.equals</code></a>. This entry is obtained at
      service start and restart. <p>

      This preparer needs to perform all operations needed to use a
      newly received listener, typically including verifying trust in
      the listener proxy, granting permissions, and setting
      constraints. The prepared listener will be retained by the service
      in its persistent store. <p>

      The service calls the <a href="../../../../net/jini/core/event/RemoteEventListener.html#notify-net.jini.core.event.RemoteEvent-"><code>notify</code></a> method on
      <a href="../../../../net/jini/core/event/RemoteEventListener.html" title="interface in net.jini.core.event"><code>RemoteEventListener</code></a> objects.
  </table>

  <table summary="Describes the locatorPreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      locatorPreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Prepares <a href="../../../../net/jini/core/discovery/LookupLocator.html" title="class in net.jini.core.discovery"><code>LookupLocator</code></a> instances for use that are
      passed to <a href="../../../../net/jini/admin/JoinAdmin.html" title="interface in net.jini.admin"><code>JoinAdmin</code></a> methods. The value
      should not be <code>null</code>. When registering with lookup
      services, this service may call or use the constraints assigned to
      the <a href="../../../../net/jini/core/discovery/LookupLocator.html#getRegistrar--"><code>getRegistrar</code></a> methods of <code>LookupLocator</code> instances
      returned from this preparer. This entry is obtained at service
      start and restart. <p>

      This preparer needs to perform all operations needed to use a
      newly received lookup locator, typically including verifying trust
      in the lookup locator and setting constraints. The prepared lookup
      locator will be retained by the service in its persistent
      store. <p>

      The <code>LookupLocator</code> instances obtained from the
      <code>initialLookupLocators</code> configuration entry will not be
      prepared by this preparer.
  </table>

  <table summary="Describes the loginContext configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      loginContext</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="http://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/LoginContext.html?is-external=true" title="class or interface in javax.security.auth.login"><code>LoginContext</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>null</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> If not <code>null</code>, specifies the JAAS
      login context to use for performing a JAAS login and supplying the
      <a href="http://docs.oracle.com/javase/8/docs/api/javax/security/auth/Subject.html?is-external=true" title="class or interface in javax.security.auth"><code>Subject</code></a> to use when running the
      service. If <code>null</code>, no JAAS login is performed. This
      entry is obtained at service start and restart.
  </table>

  <table summary="Describes the persistenceDirectory configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      persistenceDirectory</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code>String</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <em>Required for persistent implementations: no
      default</em>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The directory where the service's persistent
      state is recorded. The value should not be <code>null</code>. This
      entry is obtained at service start and restart. This entry is
      required for persistent implementations and is otherwise not used.
  </table>

  <table summary="Describes the persistenceSnapshotThreshold
         configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      persistenceSnapshotThreshold</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code>int</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>200</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The threshold used to determine whether or not
      to take a snapshot of the server's state. The value should not be
      negative. The service will delay making new snapshots until the
      number of log updates is greater than this value. This entry is
      obtained at service start and restart. This entry is only used by
      persistent implementations.
  </table>

  <table summary="Describes the persistenceSnapshotWeight configuration
         entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      persistenceSnapshotWeight</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <code>float</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>10.0f</code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The weight factor used to determine whether or
      not to take a snapshot of the server's state. The value should not
      be negative. The value represents the ratio of the size of an item
      in a snapshot versus the size of a log update. This entry is
      obtained at service start and restart. This entry is only used by
      persistent implementations.
  </table>

  <table summary="Describes the recoveredLeasePreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      recoveredLeasePreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Prepares client leases for use when they are
      recovered from persistent storage. The value should not be
      <code>null</code>. The preparer must return a lease which is equal
      to the original lease as determined by <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang"><code>Object.equals</code></a>. This entry is obtained at
      service start and restart. This entry is only used by persistent
      implementations. <p>

      This preparer needs to perform only those operations whose results
      are not retained in the lease proxy itself, but need to be
      performed in the environment in which the proxy is unmarshalled,
      typically just granting permissions. <p>

      The service calls the <a href="../../../../net/jini/core/lease/Lease.html#renew-long-"><code>renew</code></a> method on <a href="../../../../net/jini/core/lease/Lease.html" title="interface in net.jini.core.lease"><code>Lease</code></a> instances, and
      the <a href="../../../../net/jini/core/lease/LeaseMap.html#renewAll--"><code>renewAll</code></a> method
      on lease maps it creates (via the <a href="../../../../net/jini/lease/LeaseRenewalManager.html" title="class in net.jini.lease"><code>LeaseRenewalManager</code></a>) from the leases.
  </table>

  <table summary="Describes the recoveredListenerPreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      recoveredListenerPreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Prepares expiration warning and renewal failure
      listeners for use when they are recovered from persistent
      storage. The value should not be <code>null</code>. The preparer
      must return a listener which is equal to the original listener as
      determined by <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang"><code>Object.equals</code></a>. This
      entry is obtained at service start and restart. This entry is only
      used by persistent implementations. <p>

      This preparer needs to perform only those operations whose results
      are not retained in the listener proxy itself, but need to be
      performed in the environment in which the proxy is unmarshalled,
      typically just granting permissions. <p>

      The service calls the <a href="../../../../net/jini/core/event/RemoteEventListener.html#notify-net.jini.core.event.RemoteEvent-"><code>notify</code></a> method on
      <a href="../../../../net/jini/core/event/RemoteEventListener.html" title="interface in net.jini.core.event"><code>RemoteEventListener</code></a> objects.
  </table>

  <table summary="Describes the recoveredLocatorPreparer configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      recoveredLocatorPreparer</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/security/ProxyPreparer.html" title="interface in net.jini.security"><code>ProxyPreparer</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td> <code>
        new <a href="../../../../net/jini/security/BasicProxyPreparer.html" title="class in net.jini.security"><code>BasicProxyPreparer</code></a>()
        </code>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> Prepares <a href="../../../../net/jini/core/discovery/LookupLocator.html" title="class in net.jini.core.discovery"><code>LookupLocator</code></a> instances for use when they
      are recovered from persistent storage. The value should not be
      <code>null</code>. When registering with lookup services, this
      service may call or use the constraints assigned to the <a href="../../../../net/jini/core/discovery/LookupLocator.html#getRegistrar--"><code>getRegistrar</code></a>
      methods of <code>LookupLocator</code> instances returned from this
      preparer. This entry is obtained at service start and
      restart. This entry is only used by persistent
      implementations. <p>

      This preparer needs to perform only those operations whose results
      are not retained in the lookup locator itself, but need to be
      performed in the environment in which the lookup locator is
      unmarshalled. Typically no operations are needed. <p>

      The <code>LookupLocator</code> instances obtained from the
      <code>initialLookupLocators</code> configuration entry will not be
      prepared by this preparer until they are being recovered.
  </table>

  <table summary="Describes the serverExporter configuration entry"
         border="0" cellpadding="2">
    <tr valign="top">
      <th scope="col" summary="layout"> <font size="+1">&#X2022;</font>
      <th scope="col" align="left" colspan="2"> <font size="+1"><code>
      serverExporter</code></font>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Type: <td> <a href="../../../../net/jini/export/Exporter.html" title="interface in net.jini.export"><code>Exporter</code></a>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Default: <td>
<pre>
// Activatable implementation
new <a href="../../../../net/jini/activation/ActivationExporter.html" title="class in net.jini.activation"><code>ActivationExporter</code></a>(
    <i>activationID</i>,
    new <a href="../../../../net/jini/jeri/BasicJeriExporter.html" title="class in net.jini.jeri"><code>BasicJeriExporter</code></a>(
        <a href="../../../../net/jini/jeri/tcp/TcpServerEndpoint.html#getInstance-int-"><code>TcpServerEndpoint.getInstance</code></a>(0),
        new <a href="../../../../net/jini/jeri/BasicILFactory.html" title="class in net.jini.jeri"><code>BasicILFactory</code></a>()))
// Non-activatable implementations
new <a href="../../../../net/jini/jeri/BasicJeriExporter.html" title="class in net.jini.jeri"><code>BasicJeriExporter</code></a>(
    <a href="../../../../net/jini/jeri/tcp/TcpServerEndpoint.html#getInstance-int-"><code>TcpServerEndpoint.getInstance</code></a>(0),
    new <a href="../../../../net/jini/jeri/BasicILFactory.html" title="class in net.jini.jeri"><code>BasicILFactory</code></a>())
</pre>
    <tr valign="top"> <td> &nbsp <th scope="row" align="right">
      Description: <td> The object to use for exporting the service. The
      value should not be <code>null</code>. In the activatable case,
      the call to <code>getEntry</code> will supply the activation ID in
      the <code>data</code> argument. This entry is obtained at service
      start and restart.
  </table> <p>

Norm passes its configuration when creating instances of the following
configurable classes, which may support additional configuration
entries: <p>

<ul>
<li> <a href="../../../../net/jini/lease/LeaseRenewalManager.html" title="class in net.jini.lease"><code>LeaseRenewalManager</code></a>, used to renew leases,
     as specified by the <a href="#leaseManager">
     <code>leaseManager</code></a> configuration entry
<li> <a href="../../../../net/jini/discovery/LookupDiscoveryManager.html" title="class in net.jini.discovery"><code>LookupDiscoveryManager</code></a>, used to discover
     lookup services, as specified by the <a href="#discoveryManager">
     <code>discoveryManager</code></a> configuration entry
<li> <a href="../../../../net/jini/lookup/JoinManager.html" title="class in net.jini.lookup"><code>JoinManager</code></a>, used to manage lookup service
     registrations
</ul> <p>

<a name="access_control">
<h2>Access Control Permission Targets</h2>
</a>

The following table lists the remote methods on Norm's proxy objects and
the associated target names for enforcing access control using <a href="../../../../org/apache/river/norm/NormPermission.html" title="class in org.apache.river.norm"><code>NormPermission</code></a>: <p>

<table border="1" cellpadding="5"
       summary="The proxy methods and associated target names for
       NormPermission.">

<tr> <th> Proxy Method <th> Target Name

<!-- LeaseRenewalService -->

<tr> <td> <a href="../../../../net/jini/lease/LeaseRenewalService.html#createLeaseRenewalSet-long-"><code>LeaseRenewalService.createLeaseRenewalSet</code></a>
     <td> createLeaseRenewalSet

<!-- LeaseRenewalSet -->

<tr> <td> <a href="../../../../net/jini/lease/LeaseRenewalSet.html#renewFor-net.jini.core.lease.Lease-long-"><code>LeaseRenewalSet.renewFor(Lease, long)</code></a>, 
          <a href="../../../../net/jini/lease/LeaseRenewalSet.html#renewFor-net.jini.core.lease.Lease-long-long-"><code>LeaseRenewalSet.renewFor(Lease, long, long)</code></a>
     <td> renewFor
<tr> <td> <a href="../../../../net/jini/lease/LeaseRenewalSet.html#remove-net.jini.core.lease.Lease-"><code>LeaseRenewalSet.remove</code></a>
     <td> remove
<tr> <td> <a href="../../../../net/jini/lease/LeaseRenewalSet.html#getLeases--"><code>LeaseRenewalSet.getLeases</code></a>
     <td> getLeases
<tr> <td> <a href="../../../../net/jini/lease/LeaseRenewalSet.html#setExpirationWarningListener-net.jini.core.event.RemoteEventListener-long-java.rmi.MarshalledObject-"><code>LeaseRenewalSet.setExpirationWarningListener</code></a>,
          <a href="../../../../net/jini/lease/LeaseRenewalSet.html#clearExpirationWarningListener--"><code>LeaseRenewalSet.clearExpirationWarningListener</code></a>
     <td> setExpirationWarningListener
<tr> <td> <a href="../../../../net/jini/lease/LeaseRenewalSet.html#setRenewalFailureListener-net.jini.core.event.RemoteEventListener-java.rmi.MarshalledObject-"><code>LeaseRenewalSet.setRenewalFailureListener</code></a>,
          <a href="../../../../net/jini/lease/LeaseRenewalSet.html#clearRenewalFailureListener--"><code>LeaseRenewalSet.clearRenewalFailureListener</code></a>
     <td> setRenewalFailureListener

<!-- Lease and LeaseMap -->

<tr> <td> <a href="../../../../net/jini/core/lease/Lease.html#renew-long-"><code>Lease.renew</code></a>
     <td> renew
<tr> <td> <a href="../../../../net/jini/core/lease/Lease.html#cancel--"><code>Lease.cancel</code></a>
     <td> cancel
<tr> <td> <a href="../../../../net/jini/core/lease/LeaseMap.html#renewAll--"><code>LeaseMap.renewAll</code></a>
     <td> renewAll
<tr> <td> <a href="../../../../net/jini/core/lease/LeaseMap.html#cancelAll--"><code>LeaseMap.cancelAll</code></a>
     <td> cancelAll

<!-- Administrable -->

<tr> <td> <a href="../../../../net/jini/admin/Administrable.html#getAdmin--"><code>Administrable.getAdmin</code></a>
     <td> getAdmin

<!-- JoinAdmin -->

<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#getLookupAttributes--"><code>JoinAdmin.getLookupAttributes</code></a>
     <td> getLookupAttributes
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#addLookupAttributes-net.jini.core.entry.Entry:A-"><code>JoinAdmin.addLookupAttributes</code></a>
     <td> addLookupAttributes
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#modifyLookupAttributes-net.jini.core.entry.Entry:A-net.jini.core.entry.Entry:A-"><code>JoinAdmin.modifyLookupAttributes</code></a>
     <td> modifyLookupAttributes

<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#getLookupGroups--"><code>JoinAdmin.getLookupGroups</code></a>
     <td> getLookupGroups
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#addLookupGroups-java.lang.String:A-"><code>JoinAdmin.addLookupGroups</code></a>
     <td> addLookupGroups
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#removeLookupGroups-java.lang.String:A-"><code>JoinAdmin.removeLookupGroups</code></a>
     <td> removeLookupGroups
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#setLookupGroups-java.lang.String:A-"><code>JoinAdmin.setLookupGroups</code></a>
     <td> setLookupGroups

<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#getLookupLocators--"><code>JoinAdmin.getLookupLocators</code></a>
     <td> getLookupLocators
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#addLookupLocators-net.jini.core.discovery.LookupLocator:A-"><code>JoinAdmin.addLookupLocators</code></a>
     <td> addLookupLocators
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#removeLookupLocators-net.jini.core.discovery.LookupLocator:A-"><code>JoinAdmin.removeLookupLocators</code></a>
     <td> removeLookupLocators
<tr> <td> <a href="../../../../net/jini/admin/JoinAdmin.html#setLookupLocators-net.jini.core.discovery.LookupLocator:A-"><code>JoinAdmin.setLookupLocators</code></a>
     <td> setLookupLocators

<!-- DestroyAdmin -->

<tr> <td> <a href="../../../../org/apache/river/admin/DestroyAdmin.html#destroy--"><code>DestroyAdmin.destroy</code></a>
     <td> destroy

<!-- ProxyTrust -->

<tr> <td> <a href="../../../../net/jini/security/proxytrust/ProxyTrust.html#getProxyVerifier--"><code>ProxyTrust.getProxyVerifier</code></a>
     <td> getProxyVerifier

<!-- ServiceProxyAccessor -->

<tr> <td> <a href="../../../../net/jini/export/ServiceProxyAccessor.html#getServiceProxy--"><code>ServiceProxyAccessor.getServiceProxy</code></a>
     <td> getServiceProxy

</table> <p>

<a name="logging">
<h2>Loggers and Logging Levels</h2>
</a>

The Norm service implementation uses the <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Logger.html?is-external=true" title="class or interface in java.util.logging"><code>Logger</code></a> named <code>org.apache.river.norm</code> to log
information at the following logging levels: <p>

  <table border="1" cellpadding="5"
         summary="Describes logging performed by Norm at different
         logging levels">

  <caption halign="center" valign="top"><b><code>
           org.apache.river.norm</code></b></caption>

  <tr> <th scope="col"> Level <th scope="col"> Description

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#SEVERE" title="class or interface in java.util.logging"><code>SEVERE</code></a> <td>
  Problems that prevent service startup

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#WARNING" title="class or interface in java.util.logging"><code>WARNING</code></a> <td>
  Problems making modifications to persistent storage, unexpected
  internal errors

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#INFO" title="class or interface in java.util.logging"><code>INFO</code></a> <td> Service
  start, restart, or destruction; problems recovering lookup locators or
  lookup attributes; thread problems; leases or event listeners dropped
  because of definite exceptions; or problems when destroying the
  service, or in cleaning up after start up fails

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#CONFIG" title="class or interface in java.util.logging"><code>CONFIG</code></a> <td> Changes
  made to the service through administrative interfaces

  <tr> <td> <a href="../../../../org/apache/river/logging/Levels.html#HANDLED"><code>HANDLED</code></a> <td>
  Indefinite exceptions renewing leases or delivering events, when
  preparing or unmarshalling leases or events, or for exceptions handled
  when destroying the service

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#FINE" title="class or interface in java.util.logging"><code>FINE</code></a> <td> Adding or
  removing leases, leases reaching desired expiration, creating lease
  renewal sets

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#FINER" title="class or interface in java.util.logging"><code>FINER</code></a> <td> Attempting
  to renew leases, taking persistence snapshots, persistence recovery

  <tr> <td> <a href="http://docs.oracle.com/javase/8/docs/api/java/util/logging/Level.html?is-external=true#FINEST" title="class or interface in java.util.logging"><code>FINEST</code></a> <td> Low level
  operation tracing

  </table> <p>

See the <a href="../../../../org/apache/river/logging/LogManager.html" title="class in org.apache.river.logging"><code>LogManager</code></a> class for one way to use
the <code>HANDLED</code> logging level in standard logging configuration
files. <p>

<a name="examples">
<h2>Examples for Running Norm</h2>
</a>

This section provides examples of running Norm in various configurations.

<ul>
<li> <a href="#assumptions">Assumptions for running the examples</a>
<li> JRMP configurations
     <ul>
     <li> <a href="#transient_jrmp">Transient</a>
     <li> <a href="#persistent_jrmp">Persistent</a>
     <li> <a href="#activatable_jrmp">Activatable</a>
     </ul>
<li> Jini extensible remote invocation (Jini ERI) configurations
     <ul>
     <li> <a href="#transient">Transient</a>
     <li> <a href="#persistent">Persistent</a>
     <li> <a href="#activatable">Activatable</a>
     </ul>
<li> <a href="#stop_activatable">Stopping activatable configurations</a>
</ul> <p>

<a name="assumptions">
<h3>Assumptions for Running the Examples</h3>
</a>

The examples below make the following assumptions: <p>

<ul>
<li> The Java(TM) 2 Platform, Standard Edition, (J2SE(TM)) has been
     installed, and its commands are available in the current path
<li> The River-Internet release has been installed in the
     <var><b>install_dir</b></var> directory
<li> The example configuration and policy files described below are
     available in the <var><b>config_dir</b></var> directory
<li> The local host name is <var><b>your_host</b></var>
<li> The local lookup group name is <var><b>your.group</b></var>
<li> The HTTP server for download JAR files is running on
     <var><b>your_host</b></var> and is available on port
     <var><b>http_port</b></var>. This HTTP server is serving files located
     in the <var><b>install_dir</b></var>/lib-dl directory. You can use the
     <a href="../../../../org/apache/river/tool/ClassServer.html" title="class in org.apache.river.tool"><code>ClassServer</code></a> class for this purpose.
<li> The examples are being run on UNIX platforms
<li> The examples are being run on a secure network where access control
     and authentication are not needed. See the <a
     href="../../../../../../source/src/org/apache/river/example/hello/index.html">hello example</a> for some same
     client and service configurations that enforce security.
<li> For activatable services, an activation system is running on
     <var><b>your_host</b></var>. You can use the <a href="../../../../org/apache/river/phoenix/package-summary.html"><code>org.apache.river.phoenix</code></a> implementation for this purpose.
</ul> <p>

Throughout the example, items in <var><b>bold</b></var> need to be
customized for your local environment.

<a name="transient_jrmp">
<h3>Starting Transient Norm using JRMP</h3>
</a>

To run a transient Norm, which does not store any information
persistently or use the activation system to restart itself, using JRMP
for remote communication, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/start.jar \
     <a href="#start_transient_jrmp_config"><var><b>config_dir</b></var>/start-transient-jrmp-norm.config</a>
</pre>
</blockquote> <p>

This configuration uses the following files.

<a name="jsk_all_policy">
<h4>File <var><b>config_dir</b></var>/jsk-all.policy</h4>
</a>

Use this security policy file for starting and running all Norm
configurations. This file grants all permissions to local code included
in the <code>lib</code> subdirectory of the River-Internet release installation.<p>

<blockquote>
<pre>
grant codebase "file:<var><b>install_dir</b></var>/lib/*" {
    permission java.security.AllPermission;
};
</pre>
</blockquote>

<a name="start_transient_jrmp_config">
<h4>File <var><b>config_dir</b></var>/start-transient-jrmp-norm.config</h4>
</a>

Use this configuration source file to start transient Norm using
JRMP. <p>

<blockquote>
<pre>
import org.apache.river.start.NonActivatableServiceDescriptor;
import org.apache.river.start.ServiceDescriptor;

org.apache.river.start {
    private static codebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/norm-dl.jar"
       + " http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/jsk-dl.jar";
    private static policy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static classpath = "<var><b>install_dir</b></var>/lib/norm.jar";
    private static config = "<a href="#transient_jrmp_config"><var><b>config_dir</b></var>/transient-jrmp-norm.config</a>";

    static serviceDescriptors = new ServiceDescriptor[] {
        new NonActivatableServiceDescriptor(
            codebase, policy, classpath,
            "org.apache.river.norm.TransientNormServerImpl",
            new String[] { config })
    };
}
</pre>
</blockquote>

<a name="transient_jrmp_config">
<h4>File <var><b>config_dir</b></var>/transient-jrmp-norm.config</h4>
</a>

Use this configuration source file to run transient Norm using JRMP. <p>

<blockquote>
<pre>
import net.jini.jrmp.JrmpExporter;

org.apache.river.norm {
    initialLookupGroups = new String[] { "<var><b>your.group</b></var>" };
    serverExporter = new JrmpExporter();
}
</pre>
</blockquote>

<a name="persistent_jrmp">
<h3>Starting Persistent Norm using JRMP</h3>
</a>

To run a persistent Norm, which stores information persistently but does
not use the activation system to restart itself, using JRMP for remote
communication, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/start.jar \
     <a href="#start_persistent_jrmp_config"><var><b>config_dir</b></var>/start-persistent-jrmp-norm.config</a>
</pre>
</blockquote> <p>

<b>Note:</b> Because JRMP does not provide a convenient way to specify
the same object ID each time a given object is exported, this
configuration is only useful for debugging -- an existing service proxy
cannot be used after the service is restarted. <p>

This configuration uses the following additional files.

<a name="start_persistent_jrmp_config">
<h4>File <var><b>config_dir</b></var>/start-persistent-jrmp-norm.config</h4>
</a>

Use this configuration source file to start persistent Norm using
JRMP. <p>

<blockquote>
<pre>
import org.apache.river.start.NonActivatableServiceDescriptor;
import org.apache.river.start.ServiceDescriptor;

org.apache.river.start {
    private static codebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/norm-dl.jar"
       + " http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/jsk-dl.jar";
    private static policy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static classpath = "<var><b>install_dir</b></var>/lib/norm.jar";
    private static config = "<a href="#persistent_jrmp_config"><var><b>config_dir</b></var>/persistent-jrmp-norm.config</a>";

    static serviceDescriptors = new ServiceDescriptor[] {
        new NonActivatableServiceDescriptor(
            codebase, policy, classpath,
            "org.apache.river.norm.PersistentNormServerImpl",
            new String[] { config })
    };
}
</pre>
</blockquote>

<a name="persistent_jrmp_config">
<h4>File <var><b>config_dir</b></var>/persistent-jrmp-norm.config</h4>
</a>

Use this configuration source file to run persistent Norm using
JRMP. <p>

<blockquote>
<pre>
import net.jini.jrmp.JrmpExporter;

org.apache.river.norm {
    initialLookupGroups = new String[] { "<var><b>your.group</b></var>" };
    persistenceDirectory = "<var><b>config_dir</b></var>/norm.log";
    serverExporter = new JrmpExporter();
}
</pre>
</blockquote>

<a name="activatable_jrmp">
<h3>Starting Activatable Norm using JRMP</h3>
</a>

To run an activatable Norm, which stores information persistently and
uses the activation system to restart itself, using JRMP for remote
communication, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/start.jar \
     <a href="#start_activatable_jrmp_config"><var><b>config_dir</b></var>/start-activatable-jrmp-norm.config</a>
</pre>
</blockquote> <p>

You should remove the <var><b>config_dir</b></var>/group.log directory
before running this command. Note that the activation system will
restart the activatable Norm service as needed until Norm is
shutdown. <p>

Remember to remove the <var><b>config_dir</b></var>/norm.log directory
before running this command if you want Norm to forget registrations and
settings made in previous invocations. <p>

This configuration uses the following additional files.

<a name="start_activatable_jrmp_config">
<h4>File <var><b>config_dir</b></var>/start-activatable-jrmp-norm.config</h4>
</a>

Use this configuration source file to start activatable Norm using
JRMP. <p>

<blockquote>
<pre>
import org.apache.river.start.ServiceDescriptor;
import org.apache.river.start.SharedActivatableServiceDescriptor;
import org.apache.river.start.SharedActivationGroupDescriptor;

org.apache.river.start {
    private static normCodebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/norm-dl.jar"
       + " http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/jsk-dl.jar";
    private static normPolicy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static normClasspath = "<var><b>install_dir</b></var>/lib/norm.jar";
    private static normConfig = "<a href="#activatable_jrmp_config"><var><b>config_dir</b></var>/activatable-jrmp-norm.config</a>";

    private static groupCodebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/group-dl.jar";
    private static groupPolicy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static groupClasspath = "<var><b>install_dir</b></var>/lib/sharedvm.jar";
    private static groupPersistenceDirectory = "<var><b>config_dir</b></var>/group.log";

    static serviceDescriptors = new ServiceDescriptor[] {
        new SharedActivationGroupDescriptor(
            groupPolicy, groupClasspath, groupPersistenceDirectory,
            null /* serverCommand */,
            null /* serverOptions */,
            null /* serverProperties */),
        new SharedActivatableServiceDescriptor(
            normCodebase, normPolicy, normClasspath,
            "org.apache.river.norm.ActivatableNormServerImpl",
            groupPersistenceDirectory,
            new String[] { normConfig },
            true /* restart */)
    };
}
</pre>
</blockquote>

<a name="activatable_jrmp_config">
<h4>File <var><b>config_dir</b></var>/activatable-jrmp-norm.config</h4>
</a>

Use this configuration source file to run activatable Norm using
JRMP. <p>

<blockquote>
<pre>
import java.rmi.activation.ActivationID;
import net.jini.jrmp.JrmpExporter;

org.apache.river.norm {
    initialLookupGroups = new String[] { "<var><b>your.group</b></var>" };
    persistenceDirectory = "<var><b>config_dir</b></var>/norm.log";
    serverExporter = new JrmpExporter((ActivationID) $data, 0);
}
</pre>
</blockquote>

<a name="stop_activatable">
<h3>Stopping Activatable Norm</h3>
</a>

To destroy the activation group running an activatable Norm, run
using either JRMP or Jini ERI, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/destroy.jar \
     <a href="#stop_activatable_config"><var><b>config_dir</b></var>/stop-activatable-norm.config</a>
</pre>
</blockquote> <p>

Running this command will remove the
<var><b>config_dir</b></var>/group.log directory. <p>

Note that this command does not actually destroy the service itself, but
just destroys the activation group the service is running in. You may
want to first destroy the service using Norm's administrable interface,
or to remove the <var><b>config_dir</b></var>/norm.log directory after
destroying the activation group. <p>

This command uses the following additional file.

<a name="stop_activatable_config">
<h4>File <var><b>config_dir</b></var>/stop-activatable-norm.config</h4>
</a>

Use this configuration source file to destroy the activation group for
an activatable Norm. <p>

<blockquote>
<pre>
import org.apache.river.start.ServiceDescriptor;
import org.apache.river.start.SharedActivatableServiceDescriptor;

org.apache.river.start {
    private static codebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/group-dl.jar";
    private static policy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static classpath = "<var><b>install_dir</b></var>/lib/group.jar";
    private static persistenceDirectory = "<var><b>config_dir</b></var>/group.log";

    static serviceDestructors = new ServiceDescriptor[] {
        new SharedActivatableServiceDescriptor(
            codebase, policy, classpath,
            "org.apache.river.start.SharedGroupImpl",
            persistenceDirectory,
            null /* config */,
            false /* restart */)
    };
}
</pre>
</blockquote>

<a name="transient">
<h3>Starting Transient Norm using Jini ERI</h3>
</a>

To run a transient Norm, which does not store any information
persistently or use the activation system to restart itself, using Jini
ERI for remote communication, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/start.jar \
     <a href="#start_transient_config"><var><b>config_dir</b></var>/start-transient-norm.config</a>
</pre>
</blockquote> <p>

This configuration uses the following additional files.

<a name="start_transient_config">
<h4>File <var><b>config_dir</b></var>/start-transient-norm.config</h4>
</a>

Use this configuration source file to start transient Norm using
Jini ERI. <p>

<blockquote>
<pre>
import org.apache.river.start.NonActivatableServiceDescriptor;
import org.apache.river.start.ServiceDescriptor;

org.apache.river.start {
    private static codebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/norm-dl.jar"
       + " http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/jsk-dl.jar";
    private static policy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static classpath = "<var><b>install_dir</b></var>/lib/norm.jar";
    private static config = "<a href="#transient_config"><var><b>config_dir</b></var>/transient-norm.config</a>";

    static serviceDescriptors = new ServiceDescriptor[] {
        new NonActivatableServiceDescriptor(
            codebase, policy, classpath,
            "org.apache.river.norm.TransientNormServerImpl",
            new String[] { config })
    };
}
</pre>
</blockquote>

<a name="transient_config">
<h4>File <var><b>config_dir</b></var>/transient-norm.config</h4>
</a>

Use this configuration source file to run transient Norm using Jini
ERI. <p>

<blockquote>
<pre>
org.apache.river.norm {
    initialLookupGroups = new String[] { "<var><b>your.group</b></var>" };
}
</pre>
</blockquote>

<a name="persistent">
<h3>Starting Persistent Norm using Jini ERI</h3>
</a>

To run a persistent Norm, which stores information persistently but does
not use the activation system to restart itself, using Jini ERI for
remote communication, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/start.jar \
     <a href="#start_persistent_config"><var><b>config_dir</b></var>/start-persistent-norm.config</a>
</pre>
</blockquote> <p>

This configuration uses the following additional files.

<a name="start_persistent_config">
<h4>File <var><b>config_dir</b></var>/start-persistent-norm.config</h4>
</a>

Use this configuration source file to start persistent Norm using Jini
ERI. <p>

<blockquote>
<pre>
import org.apache.river.start.NonActivatableServiceDescriptor;
import org.apache.river.start.ServiceDescriptor;

org.apache.river.start {
    private static codebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/norm-dl.jar"
       + " http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/jsk-dl.jar";
    private static policy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static classpath = "<var><b>install_dir</b></var>/lib/norm.jar";
    private static config = "<a href="#persistent_config"><var><b>config_dir</b></var>/persistent-norm.config</a>";

    static serviceDescriptors = new ServiceDescriptor[] {
        new NonActivatableServiceDescriptor(
            codebase, policy, classpath,
            "org.apache.river.norm.PersistentNormServerImpl",
            new String[] { config })
    };
}
</pre>
</blockquote>

<a name="persistent_config">
<h4>File <var><b>config_dir</b></var>/persistent-norm.config</h4>
</a>

Use this configuration source file to run persistent Norm using Jini
ERI. <p>

<blockquote>
<pre>
import net.jini.id.UuidFactory;
import net.jini.jeri.BasicILFactory;
import net.jini.jeri.BasicJeriExporter;
import net.jini.jeri.tcp.TcpServerEndpoint;

org.apache.river.norm {
    initialLookupGroups = new String[] { "<var><b>your.group</b></var>" };
    persistenceDirectory = "<var><b>config_dir</b></var>/norm.log";
    serverExporter = new BasicJeriExporter(
        TcpServerEndpoint.getInstance(<var><b>obj_port</b></var>),
        new BasicILFactory(),
        false,
        true,
        UuidFactory.create("<var><b>obj_UUID_string</b></var>"));
}
</pre>
</blockquote>

The <var><b>obj_port</b></var> is the fixed TCP port to use for
listening for requests for this object. The
<var><b>obj_UUID_string</b></var> is the <a href="../../../../net/jini/id/Uuid.html" title="class in net.jini.id">universally unique ID</a> for the exported object. These IDs have the form
<code>"01234567-89ab-cdef-0123-456789abcdef"</code>. <p>

Remember to remove the <var><b>config_dir</b></var>/norm.log directory
before restarting persistent Norm if you want it to forget registrations
and settings made in previous invocations.

<a name="activatable">
<h3>Starting Activatable Norm using Jini ERI</h3>
</a>

To run an activatable Norm, which stores information persistently and
uses the activation system to restart itself, using Jini ERI for remote
communication, run the following command. <p>

<blockquote>
<pre>
java -Djava.security.policy=<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a> \
     -jar <var><b>install_dir</b></var>/lib/start.jar \
     <a href="#start_activatable_config"><var><b>config_dir</b></var>/start-activatable-norm.config</a>
</pre>
</blockquote> <p>

You should remove the <var><b>config_dir</b></var>/group.log directory
before running this command. Note that the activation system will
restart the activatable Norm service as needed until Norm is
shutdown. <p>

Remember to remove the <var><b>config_dir</b></var>/norm.log directory
before running this command if you want Norm to forget registrations and
settings made in previous invocations. <p>

This configuration uses the following additional files.

<a name="start_activatable_config">
<h4>File <var><b>config_dir</b></var>/start-activatable-norm.config</h4>
</a>

Use this configuration source file to start activatable Norm using Jini
ERI. <p>

<blockquote>
<pre>
import org.apache.river.start.ServiceDescriptor;
import org.apache.river.start.SharedActivatableServiceDescriptor;
import org.apache.river.start.SharedActivationGroupDescriptor;

org.apache.river.start {
    private static normCodebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/norm-dl.jar"
       + " http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/jsk-dl.jar";
    private static normPolicy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static normClasspath = "<var><b>install_dir</b></var>/lib/norm.jar";
    private static normConfig = "<a href="#activatable_config"><var><b>config_dir</b></var>/activatable-norm.config</a>";

    private static groupCodebase = "http://<var><b>your_host</b></var>:<var><b>http_port</b></var>/group-dl.jar";
    private static groupPolicy = "<a href="#jsk_all_policy"><var><b>config_dir</b></var>/jsk-all.policy</a>";
    private static groupClasspath = "<var><b>install_dir</b></var>/lib/sharedvm.jar";
    private static groupPersistenceDirectory = "<var><b>config_dir</b></var>/group.log";

    static serviceDescriptors = new ServiceDescriptor[] {
        new SharedActivationGroupDescriptor(
            groupPolicy, groupClasspath, groupPersistenceDirectory,
            null /* serverCommand */,
            null /* serverOptions */,
            null /* serverProperties */),
        new SharedActivatableServiceDescriptor(
            normCodebase, normPolicy, normClasspath,
            "org.apache.river.norm.ActivatableNormServerImpl",
            groupPersistenceDirectory,
            new String[] { normConfig },
            true /* restart */)
    };
}
</pre>
</blockquote>

<a name="activatable_config">
<h4>File <var><b>config_dir</b></var>/activatable-norm.config</h4>
</a>

Use this configuration source file to run activatable Norm using Jini
ERI. <p>

<blockquote>
<pre>
org.apache.river.norm {
    initialLookupGroups = new String[] { "<var><b>your.group</b></var>" };
    persistenceDirectory = "<var><b>config_dir</b></var>/norm.log";
}
</pre>
</blockquote></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../net/jini/lease/LeaseRenewalService.html" title="interface in net.jini.lease"><code>LeaseRenewalService</code></a></dd>
</dl>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/river/mercury/package-summary.html">Prev&nbsp;Package</a></li>
<li><a href="../../../../org/apache/river/outrigger/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/river/norm/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright 2007-2013, multiple authors.<br>Licensed under the <a href=http://www.apache.org/licenses/LICENSE-2.0 target=child >Apache License, Version 2.0</a>, see the <a href=../../../../doc-files/NOTICE target=child >NOTICE</a> file for attributions.</small></p>
</body>
</html>
